<!DOCTYPE html>
<html>
<head>
  <title>Desktop Session</title>
  <style>
    /* Make the iframe fill the whole window */
    html, body { margin: 0; padding: 0; height: 100%; overflow: hidden; }
    iframe { width: 100%; height: 100%; border: none; }
  </style>
</head>
<body>
<script>
  // Send a ping to the server every 30 seconds to keep session alive
  setInterval(function(){
    fetch('/ping/{{.SessionID}}');
  }, 30000);

  // When the user closes the tab or window, attempt to log out
  window.onbeforeunload = function() {
    fetch('/logout/{{.SessionID}}');
  };
</script>

<!-- 
The iframe is where noVNC runs. 
Instead of connecting directly to the container, we proxy via /proxy/:id/ 
so that users never need direct access to container ports. 
-->
<iframe src="/proxy/{{.SessionID}}/vnc.html"></iframe>
</body>
</html>
